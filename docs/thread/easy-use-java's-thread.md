
# ä½¿ç”¨çº¿ç¨‹è¿›è¡Œå¤šæ‰¹é‡è¯·æ±‚
 
 ![thread-icon.jpg](https://i.loli.net/2020/07/05/xG9bIeSB8jpz5yR.jpg)
 
 > å¤šçº¿ç¨‹ï¼Œæ— è®ºæ˜¯åœ¨å·¥ä½œï¼Œæˆ–è€…é¢è¯•è¿‡ç¨‹ä¸­ï¼Œéƒ½æ˜¯ä½œä¸ºä¸€ä¸ªæœ‰é«˜å…‰äº®ç‚¹çš„åè¯ï¼Œå…¶å®ä½œä¸ºä¸€ä¸ªå·¥å…·ï¼Œå®ƒæœ‰çš„æ—¶å€™åˆä¸åƒå¤§å®¶è¯´çš„é‚£ä¹ˆå¤æ‚ã€‚

---

## ä¸šåŠ¡åœºæ™¯

 å¤šçº¿ç¨‹å…¶å®åœ¨å‡ å¹´å‰çš„æ—¶å€™å°±å¼€å§‹äº†è§£ï¼Œä¸è¿‡éƒ½æ˜¯ä½œä¸ºä¸€äº› Demo å‡ºç°ï¼Œè¿™ä¼šè¿˜æ˜¯åœ¨é¡¹ç›®ä¸­é¦–æ¬¡è¿ç”¨åˆ°ã€‚
 
 > å‘ç”Ÿçš„ä¸šåŠ¡å¦‚ä¸‹ï¼š

 åœ¨é¡¹ç›®ä¸­æœ‰å¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†çš„æ“ä½œï¼Œå¼€å§‹æ˜¯ä¸Šä¼ ä¸€å¼ å›¾ç‰‡çš„åŒæ—¶ï¼Œåªå¯¹è¿™ä¸€å¼ å›¾ç‰‡è¿›è¡Œæ“ä½œï¼Œè€Œç”¨æˆ·ä½¿ç”¨äº†ä¸‹æ¥ï¼Œæå‡ºä¸€å¼ å›¾ç‰‡ä¸€å¼ å›¾ç‰‡çš„ä¸Šä¼ æ•ˆç‡å¤ªæ…¢ï¼Œè€Œä¸”ç­‰å¾…æ—¶é—´è¿‡ä¹…ï¼Œ
 äºæ˜¯ï¼Œå¤§å®¶éƒ½æ‡‚çš„ï¼Œéœ€æ±‚å¼€å§‹æ”¹åŠ¨äº†ï¼Œæ”¹æˆå¤šå¼ å›¾ç‰‡ä¸Šä¼ ï¼Œä¸€æ¬¡å¤„ç†ã€‚
 
 è¯„ä¼°äº†ä¸€ä¸‹å¯è¡Œæ€§ï¼Œäºæ˜¯è€ƒè™‘åˆ°äº†ä½¿ç”¨çº¿ç¨‹æ¥è¿›è¡Œå¤„ç†ã€‚
 
---

## ä½¿ç”¨

 ä½¿ç”¨èµ·æ¥æ²¡ä»€ä¹ˆå¤šå¤§çš„éš¾åº¦ï¼Œå› ä¸ºå¦‚æœåªè¦ä½ æ˜¯ä½¿ç”¨JDKçš„çº¿ç¨‹å¹¶å‘åŒ…å’Œå·¥å…·ç±»ï¼ŒåŸºæœ¬ä¸Šéƒ½æœ‰å®é™…æ¡ˆä¾‹ï¼Œè€Œä¸”éƒ½å·²ç»æœ‰äº†ä¼˜åŒ–ã€‚
 
> å¤šçº¿ç¨‹çš„åŸºç¡€çŸ¥è¯†ï¼ˆJavaï¼‰
  
  - å…³é”®å­—
     - volatile
     - synchronized
  
  - å®ç°æ–¹å¼
     - Threadç±»
     - Runnableæ¥å£
     - Callableæ¥å£
     
  - çº¿ç¨‹æ± æ¡†æ¶
     - Executoræ¡†æ¶
 
> ExecutorService
 
 è¿™é‡Œå®ç°çš„æ˜¯Callableçš„æ¥å£ï¼Œå› ä¸ºå›¾ç‰‡å¤„ç†å®Œä¹‹åï¼Œéœ€è¦æ‹¿åˆ°å›¾ç‰‡ç»“æœä¿¡æ¯ï¼Œè€ŒRunnableæ¥å£æ˜¯æ‹¿ä¸åˆ°è¿”å›å€¼ä¿¡æ¯çš„ã€‚
 
```java

public static void main(String[] args) throws InterruptedException, ExecutionException {
    long time1 = System.currentTimeMillis();

    ExecutorService service = Executors.newFixedThreadPool(5);

    for (int i = 0; i < 10; i++) {
        int finalI = i;

        java.util.concurrent.Callable<Object> callable1 = new java.util.concurrent.Callable() {
            @Override
            public Object call() throws Exception {
               
                // å®é™…ä¸šåŠ¡é€»è¾‘
                
                return finalI;
            }
        };

        Future<Object> future = service.submit(callable1);

        // è¿”å›å€¼
        Object obj = future.get();
    }

    service.shutdown();

    System.out.println("æ‰§è¡Œæ—¶é—´ï¼š" + (System.currentTimeMillis() - time1) + ":ms");
}
```
 
### è¡¥å……ï¼ŒExecutorçš„æˆå‘˜ä¿¡æ¯

> ä½¿ç”¨äº†Executoræ¡†æ¶ï¼Œå°±éœ€è¦äº†è§£ThreadPoolExecutorçš„ä¸‰ä¸ªä¸»è¦å®ç°æ–¹æ³•ï¼š
 
 - newFixedThreadPool
 åˆ›å»ºå›ºå®šçš„çº¿ç¨‹ï¼Œå¤šä¸ªï¼Œä¸€ç›´ç­‰å¾…å‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œæ‰æ‰§è¡Œåä¸€ä¸ªçº¿ç¨‹ã€‚
 
 - newSingleThreadExecutor
 åˆ›å»ºå•ä¸ªçš„çº¿ç¨‹ã€‚
 
 - newCachedThreadPool
 æ— é™åˆ¶çº¿ç¨‹æ•°é‡ã€‚
 
> ScheduledThreadPoolExecutor
 
 ScheduledThreadPoolExecutor ä¸»è¦ç”¨äºçº¿ç¨‹å†…å®šæ—¶æ‰§è¡Œçš„é€»è¾‘å‡ºç°ï¼Œè¿™ä¸ªç›®å‰è‡ªå·±ç”¨åˆ°æ¯”è¾ƒå°‘ï¼Œå¯ä»¥çœ‹ä¸‹[Javaä¸­è°ƒåº¦çº¿ç¨‹æ± ScheduledThreadPoolExecutoråŸç†æ¢ç©¶](https://ifeve.com/33981-2/)
 
> Future 
 
 ä¸»è¦æ˜¯ç”¨æ¥è¡¨ç¤ºçº¿ç¨‹å¼‚æ­¥è®¡ç®—åçš„ç»“æœï¼Œä»¥ `Future<V>` çš„å½¢å¼å‡ºç°ã€‚
 
> Runnable å’Œ Callable
 
 ä¸Šé¢è¯´è¿‡ï¼ŒRunnableä¸ä¼šè¿”å›æ‰§è¡Œç»“æœï¼Œè€ŒCallableå¯ä»¥è¿”å›æ‰§è¡Œç»“æœã€‚
 
 å¯¹äºéœ€è¦ä½¿ç”¨å¤šçº¿ç¨‹çš„ä¸šåŠ¡æ¥è¯´ï¼Œä¸ä»…ä»…åªè¦æ±‚ä»£ç ä¸Šæ¥å®ç°ï¼Œæ›´å¤šçš„æ˜¯å–å†³äºæœåŠ¡å™¨æ€§èƒ½ï¼Œæ¯”å¦‚ä¸€ä¸ªå•æ ¸çš„æœåŠ¡å™¨ï¼Œè¦å¼€å…«ä¸ªçº¿ç¨‹æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè¿™æ ·å°±åªèƒ½æ— è¯å¯è¯´ã€‚

---

## æ€»ç»“

 å¤šçº¿ç¨‹èƒ½ç”¨å¥½å°±è¯´æ˜ç¨‹åºå‘˜åŠŸåŠ›å·²ç»è¾¾åˆ°äº†æŸç§ç‚‰ç«çº¯é’çš„åœ°æ­¥ã€‚
 
 å‚è€ƒèµ„æ–™ï¼š
 
 > ğŸ“•ï¼š[Javaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯](https://book.douban.com/subject/26591326/) <br/>
 > ğŸŒï¼š[å¹¶å‘ç¼–ç¨‹ç½‘](https://ifeve.com)